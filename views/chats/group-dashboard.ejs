<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Invito-connecting peoples</title>
    <link rel="stylesheet" href="/css/chat.css" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
      integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
      crossorigin="anonymous"
    />
    <link
      rel="icon"
      href="https://res.cloudinary.com/dfq5rnahw/image/upload/v1706893513/invito/paper-plane_bqmvgx.png"
      type="image/x-icon"
    />

    <!-- socket io cdn -->
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.7.4/socket.io.js"
      integrity="sha512-tE1z+95+lMCGwy+9PnKgUSIeHhvioC9lMlI7rLWU0Ps3XTdjRygLcy4mLuL0JAoK4TLdQEyP0yOl/9dMOqpH/Q=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
  </head>

  <body>
    <div>
      <a href="/chats/dashboard">Dashboard</a>
    </div>
    <div>
      <a href="/chats/groups">Groups</a>
    </div>
    <div>
        <a href="/chats/group-dashboard">Group chat Dashboard</a>
    </div>
    <h1>&nbsp;&nbsp; Hi <%= currUser.username %></h1>
    <div class="row dashboard">
      <div class="col-3">
        <% if(createdGroup.length > 0){ %>
            <h5>Created group</h5>
            <% for(group of createdGroup) { %>
                <div
                  style="
                    background-color: burlywood;
                    height: 30px;
                    width: 150px;
                    border: 1px solid black;
                  "
                  onclick="showDashboard('<%= group._id %>')"
                  id="<%= group._id %>"
                  class="mb-2"
                >
                  <h6><%= group.name %></h6>
                </div>
            <% } %>
        <% } %>
        <% if(joinedGroup.length > 0){ %>
            <h5>Joined group</h5>
            <% for(group of joinedGroup) { %>
                <div
                  style="
                    background-color: burlywood;
                    height: 30px;
                    width: 150px;
                    border: 1px solid black;
                  "
                  onclick="showDashboard('<%= group.group_id._id %>')"
                  id="<%= group.group_id._id %>"
                  class="mb-2"
                >
                  <h6><%= group.group_id.name %></h6>
                </div>
            <% } %>
        <% } %>
      </div>


      <div class="col-9" id="chat-dashboard">
        <h3 id="start-head">click to start the chat</h3>
        <div id="chat-section" hidden>
          <div id="chat-container">
            <!-- chats here -->
          </div>

          <form action="" id="chat-form" required>
            <input
              type="text"
              name="message"
              id="message"
              placeholder="Write a message"
            />
            <button class="btn btn-primary">Send</button>
          </form>
        </div>
      </div>
    </div>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
      crossorigin="anonymous"
    ></script>

    <script src="/js/groupDashboard.js"></script>
  </body>
</html>
